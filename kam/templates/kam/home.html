
<link rel="manifest" crossorigin="use-credentials" href="/kam/manifest.json" />


<h1> This is the main homepage </h1>


<div id="divInstallApp"></div>


<!-- user logged in -->
{% if request.user.is_authenticated %}

<a href="{% url 'kam:create_album' %}">
    <button type="button">Create Album</button>
</a>


<a href="{% url 'kam:all_albums' %}">
    <button type="button">View All Albums</button>
</a>


<a href="{% url 'account_logout' %}">
    <button type="button">Logout</button>
</a>


<!-- user not logged in -->
{% else %}
<a href="{% url 'account_login' %}">
    <button type="button">Login</button>
</a>
{% endif %}


<script>
    if ("serviceWorker" in navigator) {
            navigator.serviceWorker
            .register("/serviceworker.js", { scope: "/" })
            .then((registration) => {
                registration.unregister().then((boolean) => {
                });
            })
            .catch((error) => {
                
            });
            // Befor install prompt start
            window.addEventListener('beforeinstallprompt', event => {
            event.preventDefault();
            var installDiv = document.getElementById('divInstallApp');
            installDiv.innerHTML = '<button id="installApp" class="btn btn-outline-secondary ms-1">Install App</button>';
            installDiv.addEventListener('click', () => {
                event.prompt();
                installDiv.innerHTML = ""
            });
            });
            // Before install prompt end
        }
    </script>

